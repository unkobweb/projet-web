"use strict";function validateEmail(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}function validateDate(e){return/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(String(e).toLowerCase())}var register=new Vue({el:"#register",data:{firebaseConfig:{apiKey:"AIzaSyBNHbpw_xyCeYmm30OtArbZe7SFCteL34E",authDomain:"to-game-together.firebaseapp.com",databaseURL:"https://to-game-together.firebaseio.com",projectId:"to-game-together",storageBucket:"to-game-together.appspot.com",messagingSenderId:"452035355461",appId:"1:452035355461:web:80649ad19e39cee86d142c",measurementId:"G-LHT975FTVS"},googleProvider:null,facebookProvider:null,message:"",username:"",mail:"",password:"",confirmPassword:"",dateOfBirth:new Date},methods:{register:function(){var t=this;console.log(this.dateOfBirth),console.log(validateDate(this.dateOfBirth)),this.message="",this.username.trim().length<=0?this.message="Vous n'avez pas rentré de nom d'utilisateur\n":validateEmail(this.mail.trim())?this.password.trim()!==this.confirmPassword.trim()||this.password.trim().length<=0?this.message="Vous n'avez pas renseigné deux mots de passes valides et identiques":validateDate(this.dateOfBirth)?fetch("/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.username,mail:this.mail,password:this.password,date:this.dateOfBirth})}).then(function(e){return e.json()}).then(function(e){e.err?t.message=e.err:window.location.href="/login"}):this.message="Vous n'avez pas entré votre date de naissance":this.message="Vous n'avez pas renseigné une adresse mail valide\n"},externalLogin:function externalLogin(provider){firebase.auth().signInWithPopup(eval(provider)).then(function(e){console.log(e.user),fetch("/externalConnexion",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.user.uid,name:e.user.displayName,mail:e.user.email})}).then(function(){window.location.href="/"})}).catch(function(e){console.log(e.code);e.message,e.email,e.credential})}},created:function(){firebase.initializeApp(this.firebaseConfig),firebase.analytics(),this.googleProvider=new firebase.auth.GoogleAuthProvider,this.facebookProvider=new firebase.auth.FacebookAuthProvider}});